<!-- to see all the chats  -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mini whatsapp</title>
    <link rel="stylesheet" href="styles.css">

</head>
<body>
  <h3>All Chats!</h3>
  <form methods="GET" action="/chats/new">
    <button>NEW CHAT</button>
  </form>
  <br/>

  <% for (let chat of chats) { %>
    <div class="chat">
      <p><strong>From:</strong> <%= chat.from %></p>
      <div class="msg">
        <p><%= chat.msg %></p>
        <form method="=GET" action="/chats/<%=chat._id%>/edit">
          <button>Edit</button>
        </form>
        <br>

        <form method="POST" action="/chats/<%= chat._id %>?_method=DELETE" onsubmit="return confirmDelete()">
        <button type="submit">Delete</button>
      </form>

      <script>
         function confirmDelete() {
          return confirm("Are you sure you want to delete this chat?");
        }
</script>


      </div>
      <p><strong>To:</strong> <%= chat.to %></p>
      <p><%= chat.created_at.toString().split(" ")[4] %></p>
      <p><%= chat.created_at.toString().split(" ").slice(0, 4).join("-") %></p>
    </div>
  <% } %>
</body>

</html>